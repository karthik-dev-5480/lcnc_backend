package com.lcncbe.model;

import java.util.ArrayList;
import java.util.List;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.OneToMany;
import jakarta.persistence.Table;

@Entity
@Table(name = "meta_columns")
public class DataColumn {
    @Id 
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "column_name")
    private String columnName;

    @Column(name = "data_type")
    private String dataType;

    private Integer length;

    // Use backticks to escape reserved keywords in MySQL
    @Column(name = "`precision`")
    private Integer precision;

    @Column(name = "`scale`")
    private Integer scale;

    @Column(name = "is_primary_key")
    private Boolean isPrimaryKey;

    @Column(name = "is_identity")
    private Boolean isIdentity;

    @Column(name = "is_required")
    private Boolean isRequired;

    @Column(name = "is_unique")
    private Boolean isUnique;

    @Column(name = "column_order")
    private Integer columnOrder;
    
    @ManyToOne
    @JoinColumn(name = "table_id")
    private DataTable table;
    
    @OneToMany(mappedBy = "sourceColumn")
    private List<DataRelationship> outgoingRelationships = new ArrayList<>();

    // Relationships where this column is the Target (PK side)
    @OneToMany(mappedBy = "targetColumn")
    private List<DataRelationship> incomingRelationships = new ArrayList<>();

	public Long getId() {
		return id;
	}

	public void setId(Long id) {
		this.id = id;
	}

	public String getColumnName() {
		return columnName;
	}

	public void setColumnName(String columnName) {
		this.columnName = columnName;
	}

	public String getDataType() {
		return dataType;
	}

	public void setDataType(String dataType) {
		this.dataType = dataType;
	}

	public Integer getLength() {
		return length;
	}

	public void setLength(Integer length) {
		this.length = length;
	}

	public Integer getPrecision() {
		return precision;
	}

	public void setPrecision(Integer precision) {
		this.precision = precision;
	}

	public Integer getScale() {
		return scale;
	}

	public void setScale(Integer scale) {
		this.scale = scale;
	}

	public boolean isPrimaryKey() {
		return isPrimaryKey;
	}

	public void setPrimaryKey(Boolean isPrimaryKey) {
		this.isPrimaryKey = isPrimaryKey;
	}

	public boolean isIdentity() {
		return isIdentity;
	}

	public void setIdentity(Boolean isIdentity) {
		this.isIdentity = isIdentity;
	}

	public boolean isRequired() {
		return isRequired;
	}

	public void setRequired(Boolean isRequired) {
		this.isRequired = isRequired;
	}

	public boolean isUnique() {
		return isUnique;
	}

	public void setUnique(Boolean isUnique) {
		this.isUnique = isUnique;
	}

	public int getColumnOrder() {
		return columnOrder;
	}

	public void setColumnOrder(Integer columnOrder) {
		this.columnOrder = columnOrder;
	}

	public DataTable getTable() {
		return table;
	}

	public void setTable(DataTable table) {
		this.table = table;
	}

	public List<DataRelationship> getOutgoingRelationships() {
		return outgoingRelationships;
	}

	public void setOutgoingRelationships(List<DataRelationship> outgoingRelationships) {
		this.outgoingRelationships = outgoingRelationships;
	}

	public List<DataRelationship> getIncomingRelationships() {
		return incomingRelationships;
	}

	public void setIncomingRelationships(List<DataRelationship> incomingRelationships) {
		this.incomingRelationships = incomingRelationships;
	}
    
    
}